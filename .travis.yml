env:
  global:
  - secure: TIwj3550lbMmcIW3tPxa1Rm41EEALJXEjWLZ6a1kxJq4yjUPlOZrJN+jnjl0OIox/ihAHBuxKRtonJJ0h2ccawykcypG7Qqoqsq7w1iyBO+rk017OmQ62NBEDHdqPzG6WTYBo6tFbIL8qJ1GvFcNRlk1rC4DWTiFysJukU5v5ZN1nDsRYRXxQLduvfsuONn2HuTvgAYXIfwC8SPA1gqiXYSdAuSUuL/VxcbLH0hBOQzfVGKVSfVMcINuhQA5WuIRVkFNvqc38qrQesPt8ZKYm/21ireajR6z6f/bC7v1RpXdqPGu2vJ6MKuya+l6/Xoy3BZpml/IBKitux2OgaffF6lacj/u1gw7LF/585wwbhE1FfPF5mDLzbV+ca3iTxUGK+aI4Iv2tMn0mtrxJGwuvqqjSdHX+020JidQgObMvSzxEnKKMFvrpmDh3E5tgYPkIPJnavUjsi1G7VaSVyAm6Vc64WgyyJivjsJh+fu3HS36lRjiWjGrqJF++2o/sIS4zOw/lG9Z0MLcjgPJ935phhO59f7ZAEAdV/GV4rT7grG5h8WFWpS3DSBdw7OzhEN+SGDUuZhKhXLf3X2OgqQ6B5LqsbVRvabuX/wip92KgawW7MkWR98VxpnPpskST0Tz8RFwopsvWfuXKizMo+4dD2ON8IIvMz1ZEXBxmwEcRfA=
  - secure: qw4GsYYdD/ESEZcJaEr+8dmE08xbNhqRrGx0pzw7OwTowrLNZDO3dPicSUhF5nil7d/zUV0k0NsVgnuAih2aaWAzjqn2p3hvbEyMx+g/r+ZXfBGueDC+7N00RlMjLZ1YERgXDT7HfeKVGK9aW15OKPLgvL9lVQItJ10rxYKq+Gj6yUZDDJCV1V+WppHUgub8nfD2nCjuEtqu+tWinTHwLZt/BsFHTq5n6CHwvrRHU7ubeVtx/NZo/dQjgv67pcd0oCKkz/EOjXuzyvbV14snAuSgQMv0EpA6wyOB0xDm0yjNnz6lDrnIRgcvo9uBFbfUZ8VG65/IO+fXfhcEHhasQ4MWaeFWtkMM4vtz85omo2MAawxR8s3R8mZqoSaKdXLufpjZGcw/+zxYHYvWtzVjVtjmpaTjwaKappWQ5DtpsYTWOlqMpvD9viVwR1QHastUsS48rbpFYv4C6VJvy4oyeZpxPUMOiyXDPAouHYkipTqYeh9t7GuEOh7Y0JeouV0Xpj3KEqcHDZrF3T0M8TUXkV4bF1HRnXKA5GFrI9bmrOeLkytPI8Go/0Om3wS97hIT1CZtVp104Y1bbhGDUrpLJG1YFfRI+I3FXykhu+Fj0vHV5kJG693+BvnqJy9hmeJQqT70VwG/HEpWMqbhAAprYGe7WnEUjkjIrkwfNzz2f0I=
  - REPO=p1hub/auth.protocol.one
  - secure: bFci7HslT85OWVC0CGLdm28bY4+EqNutXZPgt+HHMInYMASdMpw7uqEnR3VoI9fGdacP7X4uGEY5crnD0paRyWvUvUqVkR9tvR2XOs/0BBdnxG/kdknlwgTIu4pr2oubsNhdQf3Z/zblBgnH2zlgmqL6oVEtoBJ8i+62vOytKpngoU1fmp1JzdR7tRjVoVb6V+g8+jiqArDfJpQDOGjeAhtyWJth1/pk7fLmN1SOZ3TAJFPD505/VFjczPrRFuD1lSt2IVhttZLL1C22iILqVCCXq7O72ykDLuWxGFWTwheq601IqNG2gWFZpgIvYoYyj62oslvAQJudDOK3XrDc9PaolVamujizS/AfraVH/Z4zvvtCP3adFIdQFYl/iXy82d5KCTARFMRWbFflpcQNdbIy3XSGlYdXcnHHXhxtfS5HYLPaq2ZucB7MczZM65FsSN8ooRfGO3SEyZvFAD3Urz+g2vfqKZN71NJ21Jomv+4i8mppaYPnaHSpi8iSnumvceg+vSwbevj2Zw6MmrUNe7HkXtZ8Y/7KdNPWXvpVhd0cx0HZ8yfTIzV7XXRKHfIVIm/QLlc4PW3EaksQuHuFDMjuYoIYMmITYvqFVKeIGp3QzXDQL6s8zob2+izbiWwHcKMKtvLD349YU7tFlHP9C+OJXF7gFM2RLqBZnQY1qPY=
  - secure: T/eYROC4BbSuwm3L5OSJLvtMQMXHk+SewWSGwPoURQCWApZb8FG6IKw6S73RR5r4yg/XDsh5M5jYfca1+CIj4nY6bBzNX3TKRrD2sF3HAYlrij03XNwq8pqZKQjToOhiyrAND1NnsvPhz8ISMAVtNpLqPeycf9hz7/SwOuGPSxg/2h9H2kwda5ANtkSJXNwT19RaYMA36pvjADtVsKNeT/DTycPi9FYpnvSsrKll4Zc2AB7wO99HG4Gp93l+dCxVBRnHql2oMH9WRpE8Awc2EbZyPrmScHG5NElXIShVucdB3bJsw9mxnX3pZmKdaXpJ6iu6WIEZP2BSeT9LgfQGNrYeQEYma62Gn7zSTdFMsZt7b7pg1phBDG01ul+aVC/zwjwuVqqcCyax+f/mIEpX87xgpfwtk77aBy6n2Jkc4QwmuHLE5AnYiVI7G3WpcWa6ff701gEYwiLXgPvYXGtgFqUGXczL8xxowyHNgdaLPTVMBAHrgRpfYleWNy6v7GE9pgNPBo1mu6bH3gDK8jJCLpMnt3+gd3lFBJ+zXfcttWigkr/fs1DsYaK25hG5gOg9WCMzznkhNDmEk8+tFK9AeuXMG6ZpEA2Wi8auyb3ZZ7aKxvLxJFqvehrPZIdRcEVRn1tY3wf44Hj/u7vJImsdYlCRmsL2kgC5FDphefK0kns=
  - secure: SLLSHzuw/y4zwpXupOwo2WaS/FU9hnkSx5dMTSU2pyyqldq/lH6acGZqO/WETCH/QxpVH2cWICPdWAab+3tKSwU1njZu+REwEstiDX8zGUvMzjCthSWrTYV7IVf9KeGPMHZ0XH2Bz9DZyIhY+wJXbsdtgyyvx4yyUpdN3z02nvDfz5VqWH9Tzqvgj/HehsQ/aHbrbQLs4rv3hGz5uRos8Y3XLLaoMyqLhNGpGN90rqbCMGHppFXiWdPUeHzdXPiwxsEBwYByyMyHadIQSFVEqC+AO8CYXM4TFiALDWQKuQp8pa5W9dMwJ++Ngy/c+log3AZlASS+MloOnyGW0BJalXgsa20uhq/hcVOhm2fHzywfKx7Mg2Fh+lPdSXsI0utTohz8MyPTglIsy3frVmzsHXukgu++iCRnmZyiRRmiQcYPsR1c1QQeCVSd55OWqbVVar8z+aR+rA10H5MBn5/WvF60RqgXEGEgu6n2ZCI5kIupWVJRN+xhmM/N0l5ugeDkAAQVzMmbvsTAVEE/e/aqOonkIGNTS8Ga0/yAvHcn7+NJ2FvtcOc6QmB7uo1f7jtynw9hos4OnjtHI8Y//pKvsIOTyIY+H+fz+g42ynjhD2j5LEc3XRkpEqt4XsMhPnfcLi6x6zStVRn0IyIlfnVdfKTGVab1VQTZha9n7jcAQWo=
sudo: true
services:
- docker
jobs:
  include:
  - stage: Building image with auth.protocol.one
    script:
    - export TAG=`if [[ $TRAVIS_BRANCH == "master" ]]; then echo "latest"; else echo
      $TRAVIS_TAG; fi`
    - echo "$DOCKER_PASSWORD" | docker login --username "$DOCKER_USERNAME" --password-stdin
    - docker build -t $REPO:$TAG -t $REPO:0.0.$TRAVIS_BUILD_NUMBER .
    - docker push $REPO
after_success:
- curl -X POST $JURL/job/deploy-p1auth/build --user $JENKINS_LOGIN:$TOKEN
notifications:
  email: false
  slack:
    secure: luvQtJzpx/EP/BLKNPEED9fOJM7DISXgTmiN05WUerkSJiCPswphuuKNHDQOZMu0M9qVS6bXYsSOfcziCY4Oq+Beqm79dm1fr7LxicVC8l4ZriyuccjHWSGdPFNvBlcE0/dFv3Nmv+m1/XF7DdsSnwsLaKg1bR2iFAxtHazl1sOZGrkxJ93585JZ16UYrl2jPO/pZZvhfytHuTRbIivcv4rqtPay92KSh5SAzMrTBbglBdh21sGSWp+/lyuj/3An9FaBKiUgdanuxs66xfKJLJW7rNyyO8Q5x1x4zBQofS4PrYFKxVvvTyaQ9HDcg85ZsESUD4xfk8GzUUTKAmMlVnNj7F//gGOhoXnyE7ciCJfO18kpgqr5YATB7/sk9V3lukCqffmvcBzeDHZdIUoiUUz1tBNzxjy00Uqh7hM3xfzv2353KmqCt31zVkTyv9pYo14X3sKY5K1ZN/VmHtSWcsAHtMWVxdsHeeu6tFcsVG6+xbirwXh+DDGqsRgG/CtS+Ile0cludXrUXW2uo5IW1sgau32Jx6ovtY/u48j6UroP9iAadW/lQ/LmNqTCyzTkXXN4YTSOOWTLkM4Zu4N1K1NOwr3QyrRY272FD2xRtIWVbdP7NTJ9zodql5YkxhbvzXyAs7Tr5BJOqNyE/JB2tmRVEEZ+RpeLe63xYzaBH+U=
